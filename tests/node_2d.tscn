[gd_scene load_steps=19 format=3 uid="uid://gg633h8yrowh"]

[ext_resource type="Texture2D" uid="uid://b0vjaywamx3yp" path="res://Assets/Lights/spotlight.png" id="1_fw038"]
[ext_resource type="Texture2D" uid="uid://s280x8h2kdey" path="res://Assets/Tiles/Ground/ground.png" id="2_xebck"]
[ext_resource type="Texture2D" uid="uid://d1h563vd32g61" path="res://Assets/Turrets/Turret designs/pew pew_raven/—Pngtree—black radial gradient_5659208.png" id="3_202kj"]
[ext_resource type="Texture2D" uid="uid://cwmakmfl2t778" path="res://Assets/Turrets/Turret designs/pew pew_raven/Turret_PewPew_Raven - inverse eyes.png" id="4_ndldb"]
[ext_resource type="Texture2D" uid="uid://dqagp4fk63lkn" path="res://Assets/Turrets/Turret designs/pew pew_raven/Turret_PewPew_Raven - Kopie.png" id="5_mrcyf"]
[ext_resource type="Texture2D" uid="uid://dpk42laqvqlg2" path="res://Assets/Turrets/Turret designs/pew pew_raven/normal map soft.png" id="6_epjmr"]
[ext_resource type="Texture2D" uid="uid://sg3tcbt3xh1v" path="res://Assets/Turrets/Turret designs/saw_eye/Turret_Eye_Saw 256px.png" id="8_d28i0"]

[sub_resource type="CanvasTexture" id="CanvasTexture_cvpfw"]
diffuse_texture = ExtResource("2_xebck")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_jpemx"]
load_path = "res://.godot/imported/Turret_PewPew_Raven.png-3d0682add5658a53b3c03bfe55860848.ctex"

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_exti2"]
load_path = "res://.godot/imported/pew_pew_rave_normal.png-4d23277559cda07a455a3f94486e6968.ctex"

[sub_resource type="CanvasTexture" id="CanvasTexture_8cxdk"]
diffuse_texture = SubResource("CompressedTexture2D_jpemx")
normal_texture = SubResource("CompressedTexture2D_exti2")

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_sstmo"]
load_path = "res://.godot/imported/Turret_PewPew_Raven.png-3d0682add5658a53b3c03bfe55860848.ctex"

[sub_resource type="CanvasTexture" id="CanvasTexture_ni8ks"]
diffuse_texture = SubResource("CompressedTexture2D_sstmo")
normal_texture = ExtResource("6_epjmr")

[sub_resource type="Shader" id="Shader_017d4"]
code = "shader_type canvas_item;

uniform float alpha_tresh : hint_range(0.0, 1.0, 0.01) = 0.8;
uniform float shrink = 2.0;
uniform float offset_mul = 2.0;
uniform float coff_angle = 0.0;
uniform float coff_mul = 0.5;
uniform float coff_std:hint_range(0.0, 3.0, 0.1) = 0.2;
uniform float amp1 = 0.125;
uniform float freq1 = 4;
uniform float speed1 = 5.0;
uniform float amp2 = 0.125;
uniform float freq2 = 9;
uniform float speed2 = 1.46;
uniform sampler2D cols;
uniform sampler2D base_offset;

void vertex() {
	UV *= shrink;
	UV -= vec2((shrink-1.0)/2.0);
}

void fragment() {
	if (COLOR.a <= alpha_tresh) {
	float angle = atan(UV.y-0.5, UV.x-0.5);
	if (angle < 0.0) {
	angle += 2.0 * PI;
	}
	float h = amp1*sin(angle*freq1 + TIME*speed1) + amp2*sin(angle*freq2 + TIME*speed2);
	h += amp1+amp2;
	float b_off = texture(base_offset, vec2(1.0-angle/(2.0*PI),0)).r;
	h += b_off*offset_mul;
	float c_diff1 = angle-mod(coff_angle,2.0*PI);
	float c_diff = min(min(abs(c_diff1),abs(c_diff1-2.0*PI)),abs(c_diff1+2.0*PI));
	float c_off = exp(-c_diff*c_diff/(2.0*coff_std*coff_std));
	h += c_off*coff_mul;
	h /= 2.0*(amp1+amp2) + offset_mul;
	//h = clamp(h, 0.0, 1.0);
	float r = length(vec2(UV.x-0.5,UV.y-0.5))*2.0/shrink;
	if (r < h) {
		COLOR = texture(cols, vec2(r/h));
	}else{
		COLOR = vec4(0.0,0.0,0.0,0.0);
	}
	}
}

 "

[sub_resource type="Gradient" id="Gradient_bysr3"]
offsets = PackedFloat32Array(0, 0.313609, 1)
colors = PackedColorArray(0.926922, 0.85521, 0, 1, 0.637922, 0.595736, 0, 0.488166, 0.362286, 0.348261, 0, 0)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_ivjnf"]
gradient = SubResource("Gradient_bysr3")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_7ulfm"]
shader = SubResource("Shader_017d4")
shader_parameter/alpha_tresh = 0.8
shader_parameter/shrink = 2.0
shader_parameter/offset_mul = 2.0
shader_parameter/coff_angle = 0.0
shader_parameter/coff_mul = 0.5
shader_parameter/coff_std = 0.2
shader_parameter/amp1 = 0.125
shader_parameter/freq1 = 4.0
shader_parameter/speed1 = 5.0
shader_parameter/amp2 = 0.125
shader_parameter/freq2 = 9.0
shader_parameter/speed2 = 4.065
shader_parameter/cols = SubResource("GradientTexture1D_ivjnf")

[sub_resource type="CanvasTexture" id="CanvasTexture_s26pb"]
diffuse_texture = ExtResource("8_d28i0")

[node name="Node2D" type="Node2D"]

[node name="PointLight2D" type="PointLight2D" parent="."]
position = Vector2(-281, -168)
scale = Vector2(10.0998, 10.0998)
energy = 3.18
texture = ExtResource("1_fw038")
texture_scale = 2.49

[node name="PointLight2D2" type="PointLight2D" parent="."]
position = Vector2(210, -71)
scale = Vector2(10.0998, 10.0998)
energy = 3.18
texture = ExtResource("1_fw038")
texture_scale = 2.49

[node name="Sprite2D3" type="Sprite2D" parent="."]
visible = false
modulate = Color(0.5, 0.5, 0.5, 1)
position = Vector2(-87.5, -146)
scale = Vector2(24.7344, 13.9687)
texture = SubResource("CanvasTexture_cvpfw")

[node name="CanvasModulate" type="CanvasModulate" parent="."]
position = Vector2(-411, -178)
color = Color(0.423651, 0.423651, 0.423651, 1)

[node name="Node2D" type="Sprite2D" parent="."]
position = Vector2(-93, -13)
rotation = -6.28319
texture = SubResource("CanvasTexture_8cxdk")

[node name="Sprite2D3" type="Sprite2D" parent="Node2D"]
modulate = Color(1, 1, 1, 0.54902)
self_modulate = Color(0, 0, 7.568, 1)
position = Vector2(-26, -8.00012)
scale = Vector2(0.0152542, 0.0148048)
texture = ExtResource("3_202kj")

[node name="Sprite2D4" type="Sprite2D" parent="Node2D"]
modulate = Color(1, 1, 1, 0.54902)
self_modulate = Color(0, 0, 12.433, 1)
position = Vector2(22, -6.9999)
scale = Vector2(0.0135079, 0.0135079)
texture = ExtResource("3_202kj")

[node name="Sprite2D2" type="Sprite2D" parent="Node2D"]
self_modulate = Color(5, 5, 5, 1)
position = Vector2(-3.99991, -17)
texture = ExtResource("4_ndldb")

[node name="Sprite2D" type="Sprite2D" parent="Node2D"]
visible = false
self_modulate = Color(20, 20, 20, 0.6)
top_level = true
position = Vector2(-279, -9)
texture = ExtResource("5_mrcyf")

[node name="Node2D2" type="Sprite2D" parent="."]
position = Vector2(88, -9)
rotation = -6.28319
texture = SubResource("CanvasTexture_ni8ks")

[node name="Sprite2D3" type="Sprite2D" parent="Node2D2"]
modulate = Color(1, 1, 1, 0.54902)
self_modulate = Color(0, 0, 9.73, 1)
position = Vector2(-28, -7.00012)
scale = Vector2(0.0135079, 0.0135079)
texture = ExtResource("3_202kj")

[node name="Sprite2D4" type="Sprite2D" parent="Node2D2"]
modulate = Color(1, 1, 1, 0.54902)
self_modulate = Color(0, 0, 9.73, 1)
position = Vector2(22, -6.9999)
scale = Vector2(0.0135079, 0.0135079)
texture = ExtResource("3_202kj")

[node name="Sprite2D2" type="Sprite2D" parent="Node2D2"]
self_modulate = Color(5, 5, 5, 1)
position = Vector2(-3.99991, -17)
texture = ExtResource("4_ndldb")

[node name="Sprite2D" type="Sprite2D" parent="Node2D2"]
visible = false
self_modulate = Color(20, 20, 20, 0.6)
top_level = true
position = Vector2(-279, -9)
texture = ExtResource("5_mrcyf")

[node name="Node2D3" type="Sprite2D" parent="."]
position = Vector2(-96, -231)
rotation = -6.28319
texture = SubResource("CanvasTexture_8cxdk")

[node name="Node2D4" type="Sprite2D" parent="."]
position = Vector2(96, -231)
rotation = -6.28319
texture = SubResource("CanvasTexture_8cxdk")

[node name="Sprite2D" type="Sprite2D" parent="."]
visible = false
material = SubResource("ShaderMaterial_7ulfm")
position = Vector2(55, -52)
scale = Vector2(1.75781, 1.22656)
texture = SubResource("CanvasTexture_s26pb")
